# roomManager
基于websocket的房间连接管理机制

当前版本：0.1Beta

sliceRoom版本说明：
```
    由于之前的房间连接管理机制并不能满足当前的需求，所以启用slice进行连接管理，基本管理逻辑如下：

    用户进入房间时：
        如果房间不存在，则创建房间，创建第0列，节点加入列
        如果列已满，创建新列，加入列

    用户修改房间：
        用户修改节点roomID
        用户加入新的房间（目前考虑可能出现的问题：节点加入A房间，再加入B房间，再加入A房间之后，A房间里面有可能在相同或者不同的列有两个相同的节点，需要考虑清洗策略）

    用户离开节点：
        存活标记置为false

    房间清洗策略：
        需要做的事情比较复杂，需要慢慢考虑清洗策略
        1.需要清洗列，把列中不属于当前房间的内容过滤掉
        2.需要清洗房间，冗余的列清掉
        3.需要整个房间的所有节点排重，单个房间中不允许出现房间节点一样的连接
    
```

目前发现的问题：

```
    房间管理器逻辑有问题，在大并发用户数量加入的时候，链表里面会丢失用户
```

当前版本状况：

```
	勉强写完功能以及简单测试，并没有经过大量访问的考研，也没有进行过自动化测试。
	房间节点链表目前只有单条，在确认链表方面的可靠性完全没有问题之前，不会进行多链表并发处理的考虑。
	
	目前房间发送效率为15 - 30毫秒/房间 * 1000节点(单个房间对1000节点进行内容广播，需要15 - 30毫秒左右的时间)
	PS:具体消息发送效率也与消息体体积有关
	
	所以，目前不建议将本库用于生产环境
```

将来考虑所的功能以及优先级：

```
	优先级从高到低一次为：超高、高、中、低、讨论中
	（超高）功能稳定性调优
	（超高）自动化测试代码
	（高）包划分管理，不再放在同一目录下
	（中）房间内并发消息发送
```
